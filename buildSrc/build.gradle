buildscript {
    Properties constants = new Properties()
    file("../constants.properties").withInputStream { constants.load(it) }

    ext {
        guava_version = constants.getProperty("guavaVersion")
        assertj_version = '3.9.1'
        junit_version = '4.12'
        class_graph_version = constants.getProperty('classgraphVersion')
    }
}

repositories {
    mavenLocal()
    mavenCentral()
}

allprojects {
    tasks.withType(Test) {
        // Prevent the project from creating temporary files outside of the build directory.
        systemProperty 'java.io.tmpdir', buildDir.absolutePath
    }
}

configurations {
    runtime
}

dependencies {
    // Add the top-level projects ONLY to the host project.
    runtime project.childProjects.collect { n, p ->
        project(p.path)
    }
    compile 'com.google.guava:guava:19.0'
    compile gradleApi()
    compile group: 'com.github.docker-java', name: 'docker-java', version: '3.1.5'
    compile group: "io.github.classgraph", name: "classgraph", version: class_graph_version
    compile 'io.fabric8:kubernetes-client:4.4.1'
    compile group: 'commons-codec', name: 'commons-codec', version: '1.13'
}
